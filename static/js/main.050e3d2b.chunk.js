(this["webpackJsonppharmacy-mask-map"]=this["webpackJsonppharmacy-mask-map"]||[]).push([[0],[,,,,,,,,,,function(e,t,a){e.exports=a(18)},,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),r=a(4),i=a.n(r),l=(a(15),a(5)),c=a(6),u=a(8),s=a(7),d=a(1),p=a(9),h=(a(16),a(2)),m=a.n(h),v=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(s.a)(t).call(this,e))).state={map:{},data:[],loaded:!1,options:[],inputValue:""},a.clickhandler=a.clickhandler.bind(Object(d.a)(a)),a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=window.L,t=new e.Map("taiwanmap").setView([23.79037129915711,120.95281938174952],8),a=e.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="http://osm.org/copyright">OpenStreetMap</a> contributors'});t.addLayer(a),this.setState({map:t}),this.loadData()}},{key:"loadData",value:function(){var e=new XMLHttpRequest,t=this;e.open("GET","/1090205data.csv",!0),e.onload=function(){t.setState({data:t.csvJSON(this.response),loaded:!0})},e.send()}},{key:"csvJSON",value:function(e){for(var t=e.split("\n"),a=[],n=t[0].split(","),o=1;o<t.length;o++){for(var r={},i=t[o].split(","),l=0;l<n.length;l++)r[n[l]]=i[l];a.push(r)}return a}},{key:"clickhandler",value:function(e){m()(".leaflet-marker-icon").remove(),m()(".leaflet-popup").remove(),m()(".leaflet-shadow-pane img").remove(),console.log("\u67e5\u8a62:"+this.inputValue.value),this.setState({inputValue:this.inputValue.value})}},{key:"render",value:function(){var e=this;return o.a.createElement("div",null,o.a.createElement("div",{id:"taiwanmap"}," "),o.a.createElement("div",{id:"query",className:"leaflet-bar"},o.a.createElement("label",null,"\u9109\u93ae\u5225:",o.a.createElement("input",{placeholder:"\u5927\u5b89\u5340",ref:function(t){return e.inputValue=t}}),o.a.createElement("button",{onClick:this.clickhandler},"\u67e5\u8a62"))))}}],[{key:"getDerivedStateFromProps",value:function(e,t){var a=window.L,n=[],o=t.data.filter((function(e,a,n){if(0!==t.inputValue.lenght)return e["\u9109\u93ae\u5225"]===t.inputValue}));if(t.loaded){var r=!0,i=!1,l=void 0;try{for(var c,u=function(){var e=c.value;a.esri.Geocoding.geocode().address(e["\u6a5f\u69cb\u5730\u5740"]).run((function(o,r,i){if(!o){var l=r.results[0].latlng,c=new a.marker(l),u="\n            \u85e5\u5c40\u540d\u7a31: ".concat(e["\u91ab\u4e8b\u6a5f\u69cb\u540d\u7a31"],"<br/>\n            \u5730\u5740: ").concat(e["\u6a5f\u69cb\u5730\u5740"],"<br/>\n            \u91ab\u4e8b\u6a5f\u69cb\u4ee3\u78bc: ").concat(e["\u91ab\u4e8b\u6a5f\u69cb\u4ee3\u78bc"]," <br/>\n            \u96fb\u8a71: (").concat(e["\u96fb\u8a71\u5340\u57df\u865f\u78bc"],")-").concat(e["\u96fb\u8a71\u865f\u78bc"]);c.bindPopup(u),t.map.addLayer(c),n.push(c)}}))},s=o[Symbol.iterator]();!(r=(c=s.next()).done);r=!0)u()}catch(d){i=!0,l=d}finally{try{r||null==s.return||s.return()}finally{if(i)throw l}}}else console.log("data doesn't load sucuess. ");return null}}]),t}(n.Component);a(17);var f=function(){return o.a.createElement("div",{id:"App"},o.a.createElement(v,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(o.a.createElement(f,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}],[[10,1,2]]]);
//# sourceMappingURL=main.050e3d2b.chunk.js.map