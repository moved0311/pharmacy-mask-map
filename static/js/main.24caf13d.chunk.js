(this["webpackJsonppharmacy-mask-map"]=this["webpackJsonppharmacy-mask-map"]||[]).push([[0],{12:function(e,t,a){e.exports=a(22)},17:function(e,t,a){},18:function(e,t,a){},19:function(e,t,a){},22:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(6),o=a.n(i),l=(a(17),a(7)),c=a(8),u=a(11),s=a(9),p=a(2),d=a(10),h=(a(18),a(3)),m=a.n(h),f=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(s.a)(t).call(this,e))).state={map:{},data:[],loaded:!1,options:[],inputValue:""},a.clickhandler=a.clickhandler.bind(Object(p.a)(a)),a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=window.L,t=new e.Map("taiwanmap").setView([23.79037129915711,120.95281938174952],8),a=e.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="http://osm.org/copyright">OpenStreetMap</a> contributors'});t.addLayer(a),this.setState({map:t}),this.loadData()}},{key:"loadData",value:function(){var e=new XMLHttpRequest,t=this;e.open("GET","/pharmacy-mask-map/1090205data.csv",!0),e.onload=function(){t.setState({data:t.csvJSON(this.response),loaded:!0})},e.send()}},{key:"csvJSON",value:function(e){for(var t=e.split("\n"),a=[],n=t[0].split(","),r=1;r<t.length;r++){for(var i={},o=t[r].split(","),l=0;l<n.length;l++)i[n[l]]=o[l];a.push(i)}return a}},{key:"clickhandler",value:function(e){m()(".leaflet-marker-icon").remove(),m()(".leaflet-popup").remove(),m()(".leaflet-shadow-pane img").remove(),console.log("\u67e5\u8a62:"+this.inputValue.value),this.setState({inputValue:this.inputValue.value})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("div",{id:"taiwanmap"}," "),r.a.createElement("div",{id:"query",className:"leaflet-bar"},r.a.createElement("label",null,"\u9109\u93ae\u5225:",r.a.createElement("input",{placeholder:"\u5927\u5b89\u5340",ref:function(t){return e.inputValue=t}}),r.a.createElement("button",{onClick:this.clickhandler},"\u67e5\u8a62"))))}}],[{key:"getDerivedStateFromProps",value:function(e,t){var a=window.L,n=[],r=[];if(t.inputValue.length>0&&(r=t.inputValue.length>5?(r=t.data.filter((function(e){return e["\u7e23\u5e02\u5225"]===t.inputValue.substr(0,3)}))).filter((function(e){return e["\u9109\u93ae\u5225"]===t.inputValue.substr(3)})):t.data.filter((function(e){return e["\u9109\u93ae\u5225"]===t.inputValue}))),t.loaded){var i=!0,o=!1,l=void 0;try{for(var c,u=function(){var e=c.value;a.esri.Geocoding.geocode().address(e["\u6a5f\u69cb\u5730\u5740"]).run((function(r,i,o){if(!r){var l=i.results[0].latlng,c=new a.marker(l),u="\n            \u85e5\u5c40\u540d\u7a31: ".concat(e["\u91ab\u4e8b\u6a5f\u69cb\u540d\u7a31"],"<br/>\n            \u5730\u5740: ").concat(e["\u6a5f\u69cb\u5730\u5740"],"<br/>\n            \u91ab\u4e8b\u6a5f\u69cb\u4ee3\u78bc: ").concat(e["\u91ab\u4e8b\u6a5f\u69cb\u4ee3\u78bc"]," <br/>\n            \u96fb\u8a71: (").concat(e["\u96fb\u8a71\u5340\u57df\u865f\u78bc"],")-").concat(e["\u96fb\u8a71\u865f\u78bc"]);c.bindPopup(u),t.map.addLayer(c),n.push(c)}}))},s=r[Symbol.iterator]();!(i=(c=s.next()).done);i=!0)u()}catch(p){o=!0,l=p}finally{try{i||null==s.return||s.return()}finally{if(o)throw l}}}return null}}]),t}(n.Component),v=(a(19),a(4));v.a.initialize("UA-158033292-1"),v.a.pageview(window.location.pathname+window.location.search);var w=function(){return r.a.createElement("div",{id:"App"},r.a.createElement(f,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(w,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[12,1,2]]]);
//# sourceMappingURL=main.24caf13d.chunk.js.map