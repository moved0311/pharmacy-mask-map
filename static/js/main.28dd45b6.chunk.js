(this["webpackJsonppharmacy-mask-map"]=this["webpackJsonppharmacy-mask-map"]||[]).push([[0],{11:function(e,t,a){e.exports=a(21)},16:function(e,t,a){},17:function(e,t,a){},18:function(e,t,a){},21:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(5),o=a.n(i),l=(a(16),a(6)),s=a(7),c=a(10),u=a(8),p=a(2),d=a(9),h=(a(17),function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={map:{},data:[],loaded:!1,options:[],inputValue:"",makersArr:[]},a.clickhandler=a.clickhandler.bind(Object(p.a)(a)),a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=window.L,t=new e.Map("taiwanmap").setView([23.79037129915711,120.95281938174952],8),a=e.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="http://osm.org/copyright">OpenStreetMap</a> contributors'});t.addLayer(a),this.setState({map:t}),this.loadData()}},{key:"loadData",value:function(){var e=new XMLHttpRequest,t=this;e.open("GET","https://raw.githubusercontent.com/kiang/pharmacies/master/json/points.json?fbclid=IwAR3fyzFIBPOMj1WcDLJaXEYFZQiAlfW9BFYpsSN_sELepbKtdjM4HGgP7NM",!0),e.onreadystatechange=function(){4===this.readyState&&200===this.status&&t.setState({data:JSON.parse(this.response),loaded:!0})},e.send()}},{key:"csvJSON",value:function(e){for(var t=e.split("\n"),a=[],n=t[0].split(","),r=1;r<t.length;r++){for(var i={},o=t[r].split(","),l=0;l<n.length;l++)i[n[l]]=o[l];a.push(i)}return a}},{key:"clickhandler",value:function(e){var t=!0,a=!1,n=void 0;try{for(var r,i=this.state.makersArr[Symbol.iterator]();!(t=(r=i.next()).done);t=!0){var o=r.value;this.state.map.removeLayer(o)}}catch(l){a=!0,n=l}finally{try{t||null==i.return||i.return()}finally{if(a)throw n}}console.log("\u67e5\u8a62:"+this.inputValue.value),this.setState({inputValue:this.inputValue.value})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("div",{id:"taiwanmap"}," "),r.a.createElement("div",{id:"query",className:"leaflet-bar"},r.a.createElement("label",null,"\u9109\u93ae\u5225:",r.a.createElement("input",{placeholder:"\u53f0\u5317\u5e02\u5927\u5b89\u5340 or \u5927\u5b89\u5340",ref:function(t){return e.inputValue=t}}),r.a.createElement("button",{onClick:this.clickhandler},"\u67e5\u8a62"))))}}],[{key:"getDerivedStateFromProps",value:function(e,t){var a=window.L,n=[],r=t.data.features;if(t.inputValue.length>0&&(n=t.inputValue.length>5?r.filter((function(e){return e.properties.address.substr(0,6)===t.inputValue})):r.filter((function(e){return e.properties.address.substr(3,3)===t.inputValue})),console.log("\u5171"+n.length+"\u6bd4\u7d50\u679c")),t.loaded){var i=!0,o=!1,l=void 0;try{for(var s,c=n[Symbol.iterator]();!(i=(s=c.next()).done);i=!0){var u=s.value,p=u.geometry.coordinates;p=[p[1],p[0]];var d=new a.marker(new a.latLng(p)),h="\n        \u85e5\u5c40\u540d\u7a31: ".concat(u.properties.name,"<br/>\n        \u5730\u5740: ").concat(u.properties.address,"<br/>\n        \u91ab\u4e8b\u6a5f\u69cb\u4ee3\u78bc: ").concat(u.properties.id," <br/>\n        \u96fb\u8a71: ").concat(u.properties.phone,"<br/>\n        \u6210\u4eba\u53e3\u7f69\u7e3d\u5269\u9918\u6578: ").concat(u.properties.mask_adult,"<br/>\n        \u5152\u7ae5\u53e3\u7f69\u5269\u9918\u6578: ").concat(u.properties.mask_child,"<br/>\n        \u4f86\u6e90\u8cc7\u6599\u6642\u9593: ").concat(u.properties.updated,"\n        ");d.bindPopup(h),t.map.addLayer(d),t.makersArr.push(d)}}catch(m){o=!0,l=m}finally{try{i||null==c.return||c.return()}finally{if(o)throw l}}}return null}}]),t}(n.Component)),m=(a(18),a(3));m.a.initialize("UA-158033292-1"),m.a.pageview(window.location.pathname+window.location.search);var v=function(){return r.a.createElement("div",{id:"App"},r.a.createElement(h,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(v,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[11,1,2]]]);
//# sourceMappingURL=main.28dd45b6.chunk.js.map