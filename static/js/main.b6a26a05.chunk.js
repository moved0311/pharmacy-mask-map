(this["webpackJsonppharmacy-mask-map"]=this["webpackJsonppharmacy-mask-map"]||[]).push([[0],[,,,,,,,,,,function(e,t,n){e.exports=n(18)},,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(4),i=n.n(o),l=(n(15),n(5)),u=n(6),c=n(8),s=n(7),p=n(1),d=n(9),h=(n(16),n(2)),m=n.n(h),f=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(c.a)(this,Object(s.a)(t).call(this,e))).state={map:{},data:[],loaded:!1,options:[],inputValue:""},n.clickhandler=n.clickhandler.bind(Object(p.a)(n)),n}return Object(d.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=window.L,t=new e.Map("taiwanmap").setView([23.79037129915711,120.95281938174952],8),n=e.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="http://osm.org/copyright">OpenStreetMap</a> contributors'});t.addLayer(n),this.setState({map:t}),this.loadData()}},{key:"loadData",value:function(){var e=new XMLHttpRequest,t=this;e.open("GET","/pharmacy-mask-map/1090205data.csv",!0),e.onload=function(){t.setState({data:t.csvJSON(this.response),loaded:!0})},e.send()}},{key:"csvJSON",value:function(e){for(var t=e.split("\n"),n=[],a=t[0].split(","),r=1;r<t.length;r++){for(var o={},i=t[r].split(","),l=0;l<a.length;l++)o[a[l]]=i[l];n.push(o)}return n}},{key:"clickhandler",value:function(e){m()(".leaflet-marker-icon").remove(),m()(".leaflet-popup").remove(),m()(".leaflet-shadow-pane img").remove(),console.log("\u67e5\u8a62:"+this.inputValue.value),this.setState({inputValue:this.inputValue.value})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("div",{id:"taiwanmap"}," "),r.a.createElement("div",{id:"query",className:"leaflet-bar"},r.a.createElement("label",null,"\u9109\u93ae\u5225:",r.a.createElement("input",{placeholder:"\u5927\u5b89\u5340",ref:function(t){return e.inputValue=t}}),r.a.createElement("button",{onClick:this.clickhandler},"\u67e5\u8a62"))))}}],[{key:"getDerivedStateFromProps",value:function(e,t){var n=window.L,a=[],r=[];if(t.inputValue.length>0&&(r=t.inputValue.length>5?(r=t.data.filter((function(e){return e["\u7e23\u5e02\u5225"]===t.inputValue.substr(0,3)}))).filter((function(e){return e["\u9109\u93ae\u5225"]===t.inputValue.substr(3)})):t.data.filter((function(e){return e["\u9109\u93ae\u5225"]===t.inputValue}))),t.loaded){var o=!0,i=!1,l=void 0;try{for(var u,c=function(){var e=u.value;n.esri.Geocoding.geocode().address(e["\u6a5f\u69cb\u5730\u5740"]).run((function(r,o,i){if(!r){var l=o.results[0].latlng,u=new n.marker(l),c="\n            \u85e5\u5c40\u540d\u7a31: ".concat(e["\u91ab\u4e8b\u6a5f\u69cb\u540d\u7a31"],"<br/>\n            \u5730\u5740: ").concat(e["\u6a5f\u69cb\u5730\u5740"],"<br/>\n            \u91ab\u4e8b\u6a5f\u69cb\u4ee3\u78bc: ").concat(e["\u91ab\u4e8b\u6a5f\u69cb\u4ee3\u78bc"]," <br/>\n            \u96fb\u8a71: (").concat(e["\u96fb\u8a71\u5340\u57df\u865f\u78bc"],")-").concat(e["\u96fb\u8a71\u865f\u78bc"]);u.bindPopup(c),t.map.addLayer(u),a.push(u)}}))},s=r[Symbol.iterator]();!(o=(u=s.next()).done);o=!0)c()}catch(p){i=!0,l=p}finally{try{o||null==s.return||s.return()}finally{if(i)throw l}}}return null}}]),t}(a.Component);n(17);var v=function(){return r.a.createElement("div",{id:"App"},r.a.createElement(f,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(v,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}],[[10,1,2]]]);
//# sourceMappingURL=main.b6a26a05.chunk.js.map