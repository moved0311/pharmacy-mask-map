(this["webpackJsonppharmacy-mask-map"]=this["webpackJsonppharmacy-mask-map"]||[]).push([[0],{11:function(t,e,a){t.exports=a(21)},16:function(t,e,a){},17:function(t,e,a){},18:function(t,e,a){},21:function(t,e,a){"use strict";a.r(e);var n=a(0),r=a.n(n),o=a(5),i=a.n(o),c=(a(16),a(6)),l=a(7),s=a(10),u=a(8),d=a(2),p=a(9),h=(a(17),function(t){function e(t){var a;return Object(c.a)(this,e),(a=Object(s.a)(this,Object(u.a)(e).call(this,t))).state={map:{},data:[],loaded:!1,options:[],inputValue:"",makersArr:[]},a.clickhandler=a.clickhandler.bind(Object(d.a)(a)),a}return Object(p.a)(e,t),Object(l.a)(e,[{key:"componentDidMount",value:function(){var t=window.L,e=new t.Map("taiwanmap").setView([23.79037129915711,120.95281938174952],8),a=t.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="http://osm.org/copyright">OpenStreetMap</a> contributors'});e.addLayer(a),this.setState({map:e}),this.loadData()}},{key:"loadData",value:function(){var t=new XMLHttpRequest,e=this;t.open("GET","https://raw.githubusercontent.com/moved0311/get-mask-data/master/output.csv",!0),t.onreadystatechange=function(){4===this.readyState&&200===this.status&&e.setState({data:e.csvJSON(this.response),loaded:!0})},t.send()}},{key:"csvJSON",value:function(t){for(var e=t.split("\n"),a=[],n=e[0].split(","),r=1;r<e.length;r++){for(var o={},i=e[r].split(","),c=0;c<n.length;c++)o[n[c]]=i[c];a.push(o)}return a}},{key:"clickhandler",value:function(t){var e=!0,a=!1,n=void 0;try{for(var r,o=this.state.makersArr[Symbol.iterator]();!(e=(r=o.next()).done);e=!0){var i=r.value;this.state.map.removeLayer(i)}}catch(c){a=!0,n=c}finally{try{e||null==o.return||o.return()}finally{if(a)throw n}}console.log("\u67e5\u8a62:"+this.inputValue.value),this.setState({inputValue:this.inputValue.value})}},{key:"render",value:function(){var t=this;return r.a.createElement("div",null,r.a.createElement("div",{id:"taiwanmap"}," "),r.a.createElement("div",{id:"query",className:"leaflet-bar"},r.a.createElement("label",null,"\u9109\u93ae\u5225:",r.a.createElement("input",{placeholder:"\u5927\u5b89\u5340",ref:function(e){return t.inputValue=e}}),r.a.createElement("button",{onClick:this.clickhandler},"\u67e5\u8a62"))))}}],[{key:"getDerivedStateFromProps",value:function(t,e){var a=window.L,n=[];if(e.inputValue.length>0&&(n=e.inputValue.length>5?(n=e.data.filter((function(t){return t["\u7e23\u5e02\u5225"]===e.inputValue.substr(0,3)}))).filter((function(t){return t["\u9109\u93ae\u5225"]===e.inputValue.substr(3)})):e.data.filter((function(t){return t["\u9109\u93ae\u5225"]===e.inputValue})),console.log("\u5171"+n.length+"\u6bd4\u7d50\u679c")),e.loaded){var r=!0,o=!1,i=void 0;try{for(var c,l=function(){var t=c.value,n=new XMLHttpRequest,r="https://geocode.arcgis.com/arcgis/rest/services/World/GeocodeServer/findAddressCandidates?address=".concat(t["\u6a5f\u69cb\u5730\u5740"],"&f=json");n.open("GET",r,!0),n.onload=function(){var n=JSON.parse(this.response).candidates[0].location,r=new a.marker(new a.latLng([n.y,n.x])),o="\n          \u85e5\u5c40\u540d\u7a31: ".concat(t["\u91ab\u4e8b\u6a5f\u69cb\u540d\u7a31"],"<br/>\n          \u5730\u5740: ").concat(t["\u6a5f\u69cb\u5730\u5740"],"<br/>\n          \u91ab\u4e8b\u6a5f\u69cb\u4ee3\u78bc: ").concat(t["\u91ab\u4e8b\u6a5f\u69cb\u4ee3\u78bc"]," <br/>\n          \u96fb\u8a71: (").concat(t["\u96fb\u8a71\u5340\u57df\u865f\u78bc"],")-").concat(t["\u96fb\u8a71\u865f\u78bc"],"<br/>\n          \u6210\u4eba\u53e3\u7f69\u7e3d\u5269\u9918\u6578: ").concat(t["\u6210\u4eba\u53e3\u7f69\u7e3d\u5269\u9918\u6578"],"<br/>\n          \u5152\u7ae5\u53e3\u7f69\u5269\u9918\u6578: ").concat(t["\u5152\u7ae5\u53e3\u7f69\u5269\u9918\u6578"],"<br/>\n          \u4f86\u6e90\u8cc7\u6599\u6642\u9593: ").concat(t["\u4f86\u6e90\u8cc7\u6599\u6642\u9593"],"\n          ");r.bindPopup(o),e.map.addLayer(r),e.makersArr.push(r)},n.send()},s=n[Symbol.iterator]();!(r=(c=s.next()).done);r=!0)l()}catch(u){o=!0,i=u}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}}return null}}]),e}(n.Component)),m=(a(18),a(3));m.a.initialize("UA-158033292-1"),m.a.pageview(window.location.pathname+window.location.search);var v=function(){return r.a.createElement("div",{id:"App"},r.a.createElement(h,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(v,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()}))}},[[11,1,2]]]);
//# sourceMappingURL=main.30f5784f.chunk.js.map